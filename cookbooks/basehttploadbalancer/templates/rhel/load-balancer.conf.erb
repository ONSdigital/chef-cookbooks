# This file was generated by the Chef 'basehttploadbalancer' cookbook (updated <%= Time.now.utc.strftime('%d %b %Y %H:%M') %>)
upstream <%= @cluster_name %> {
  <% if @balancing_method == 'ip_hash' || @balancing_method == 'least_conn' %>
    <%= @balancing_method %>;
  <% end %>
  <% @origin_servers.each do |origin_server| %>
    server <%= origin_server %>;
  <% end %>
}

server {
    listen      80;
    server_name localhost;

    location / {
        proxy_set_header Host $host;
        proxy_set_header X-Forwarded-For $remote_addr;
        proxy_pass http://<%= @cluster_name %>;
    }
}
